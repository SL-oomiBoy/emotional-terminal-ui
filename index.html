<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ERROR 404: Relationship Not Found</title>
    <link href="https://fonts.googleapis.com/css2?family=Press+Start+2P&family=Roboto+Mono:wght@400;700&display=swap"
        rel="stylesheet">
    <style>
        /* Define CSS variables for consistent theming */
        :root {
            --dark-bg: #1a0000; /* Very dark red/black for background */
            --terminal-bg: #0d0000; /* Even darker for terminal windows */
            --glitch-red: #ff3333; /* Bright red for glitch effects */
            --glitch-blue: #3333ff; /* Bright blue for glitch effects */
            --glitch-green: #33ff33; /* Bright green for glitch effects */
            --text-color: #e0e0e0; /* Off-white for general text */
            --error-color: #ff0000; /* Pure red for errors */
            --warning-color: #ff9900; /* Orange for warnings */
            --success-color: #00ff00; /* Green for success (ironic here) */
            --border-color: #800000; /* Darker red for borders */
        }

        /* Global reset and basic body styles */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            background: var(--dark-bg);
            color: var(--text-color);
            font-family: 'Roboto Mono', monospace; /* Monospaced font for code/terminal feel */
            overflow-x: hidden; /* Prevent horizontal scroll */
            display: flex;
            flex-direction: column;
            min-height: 100vh; /* Full viewport height */
            line-height: 1.6;
            -webkit-font-smoothing: antialiased; /* Smoother fonts for webkit browsers */
            -moz-osx-font-smoothing: grayscale; /* Smoother fonts for firefox */
        }

        /* Main content container */
        .container {
            max-width: 900px;
            margin: 0 auto;
            padding: 20px;
            width: 100%;
        }

        /* Header section with glitching titles */
        .header {
            text-align: center;
            padding: 50px 0;
            position: relative;
        }

        .glitch-title {
            font-family: 'Press Start 2P', cursive; /* Retro arcade font */
            font-size: 3.5rem;
            color: var(--glitch-red);
            position: relative;
            animation: glitch-text 1.5s infinite linear alternate; /* Glitch animation */
            text-shadow: 0 0 10px var(--glitch-red), 0 0 20px var(--glitch-blue); /* Neon glow effect */
            text-transform: uppercase;
        }

        .glitch-subtitle {
            font-family: 'Press Start 2P', cursive; /* Corrected font name */
            font-size: 1.5rem;
            color: var(--glitch-blue);
            margin-top: 15px;
            animation: glitch-text 1.8s infinite linear reverse; /* Reverse glitch for subtitle */
            text-shadow: 0 0 8px var(--glitch-blue), 0 0 15px var(--glitch-red);
        }

        /* Keyframe animation for text glitch effect */
        @keyframes glitch-text {
            0% {
                transform: translate(0);
                text-shadow: 2px -2px var(--glitch-blue), -2px 2px var(--glitch-red);
            }
            25% {
                transform: translate(-2px, 2px);
                text-shadow: -2px -2px var(--glitch-green), 2px 2px var(--glitch-blue);
            }
            50% {
                transform: translate(-1px, -1px);
                text-shadow: 2px 2px var(--glitch-red), -2px -2px var(--glitch-green);
            }
            75% {
                transform: translate(2px, 2px);
                text-shadow: -2px 2px var(--glitch-blue), 2px -2px var(--glitch-red);
            }
            100% {
                transform: translate(0);
                text-shadow: 2px -2px var(--glitch-red), -2px 2px var(--glitch-green);
            }
        }

        /* Styling for terminal windows */
        .terminal-window {
            background: var(--terminal-bg);
            border: 2px solid var(--border-color);
            border-radius: 8px;
            padding: 25px;
            margin: 40px 0;
            box-shadow: 0 0 25px rgba(255, 0, 0, 0.4); /* Red glow */
            position: relative;
            overflow: hidden;
        }

        .terminal-header {
            display: flex;
            align-items: center;
            padding-bottom: 15px;
            margin-bottom: 20px;
            border-bottom: 1px dashed var(--border-color); /* Dashed border for terminal look */
        }

        .terminal-header .dot {
            width: 12px;
            height: 12px;
            border-radius: 50%;
            margin-right: 8px;
        }

        /* Traffic light dots for terminal header */
        .terminal-header .red { background-color: #ff5f56; }
        .terminal-header .yellow { background-color: #ffbd2e; }
        .terminal-header .green { background-color: #27c93f; }

        .terminal-header span {
            font-size: 0.9em;
            color: #888; /* Grey for terminal path/user */
        }

        .terminal-content pre {
            white-space: pre-wrap; /* Preserve whitespace and wrap */
            word-break: break-all; /* Break long words */
            font-size: 1.0em;
            color: var(--text-color);
            min-height: 50px;
        }

        /* Animations for individual lines in terminal */
        .terminal-content .line {
            opacity: 0;
            transform: translateY(10px);
            animation: fadeInLine 0.5s forwards;
        }

        /* Color coding for terminal output */
        .terminal-content .input { color: var(--success-color); } /* Green for user input */
        .terminal-content .output { color: var(--text-color); }
        .terminal-content .error {
            color: var(--error-color);
            font-weight: bold;
        }
        .terminal-content .warning { color: var(--warning-color); }
        .terminal-content .comment {
            color: #888;
            font-style: italic;
        }

        .terminal-content .blink {
            animation: blink-cursor 1s infinite steps(1); /* Blinking cursor effect */
        }

        @keyframes fadeInLine {
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        @keyframes blink-cursor {
            from, to { opacity: 1; }
            50% { opacity: 0; }
        }

        /* Visual display section with broken heart */
        .visual-display {
            background: var(--terminal-bg);
            border: 2px solid var(--border-color);
            border-radius: 8px;
            margin: 40px 0;
            padding: 30px;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            min-height: 400px;
            box-shadow: 0 0 25px rgba(255, 0, 0, 0.4);
            position: relative;
            overflow: hidden;
        }

        .broken-heart {
            font-size: 10rem;
            color: var(--error-color);
            animation: pulse-break 2s infinite alternate; /* Pulsing animation */
            position: relative;
            display: inline-block;
            text-shadow: 0 0 20px var(--error-color), 0 0 40px rgba(255, 0, 0, 0.6); /* Intense glow */
        }

        .heart-crack {
            position: absolute;
            width: 100%;
            height: 100%;
            top: 0;
            left: 0;
            overflow: hidden;
        }

        .heart-crack::before {
            content: '';
            position: absolute;
            /* Creates a diagonal crack using linear gradient */
            background: linear-gradient(to bottom right, transparent 48%, var(--text-color) 48%, var(--text-color) 52%, transparent 52%);
            width: 150%; /* Make it larger to cover the heart */
            height: 150%;
            top: -25%;
            left: -25%;
            transform: rotate(45deg); /* Rotate to create a diagonal line */
            opacity: 0;
            animation: show-crack 1s forwards 2s; /* Delay to appear after pulse */
        }

        @keyframes pulse-break {
            0% { transform: scale(1); opacity: 1; }
            50% { transform: scale(1.05); opacity: 0.8; }
            100% { transform: scale(1); opacity: 1; }
        }

        @keyframes show-crack {
            to { opacity: 1; }
        }

        .heart-message {
            font-size: 1.5rem;
            margin-top: 30px;
            text-align: center;
            line-height: 1.4;
            color: var(--warning-color);
            opacity: 0;
            animation: fadeInText 1s forwards 2.5s; /* Fade in after heart animation */
        }

        /* Buttons styling */
        .btn {
            background: var(--error-color);
            color: white;
            border: 2px solid var(--error-color);
            padding: 12px 25px;
            font-family: 'Press Start 2P', cursive;
            font-size: 0.9em;
            cursor: pointer;
            transition: all 0.3s ease;
            box-shadow: 0 0 10px rgba(255, 0, 0, 0.5);
            text-transform: uppercase;
            letter-spacing: 1px;
            margin-top: 40px; /* Added margin for single button */
            display: none; /* Hidden by default, shown by JS */
        }

        .btn:hover {
            background: var(--dark-bg);
            color: var(--error-color);
            box-shadow: 0 0 15px rgba(255, 0, 0, 0.8);
            transform: translateY(-2px);
        }

        .btn:active {
            transform: translateY(0);
            box-shadow: 0 0 5px rgba(255, 0, 0, 0.8);
        }

        /* Message sequence for analysis */
        .message-sequence {
            display: none; /* Hidden by default, shown by JS */
            flex-direction: column;
            align-items: center;
            gap: 20px;
            margin-top: 50px;
            padding: 30px;
            background: rgba(0, 0, 0, 0.6); /* Semi-transparent background */
            border-radius: 8px;
            box-shadow: 0 0 20px rgba(255, 0, 0, 0.3);
        }

        .message-sequence p {
            font-size: 1.2rem;
            color: var(--text-color);
            text-align: center;
            opacity: 0;
            transform: translateY(10px);
        }

        .message-sequence .emoji {
            font-size: 1.5rem;
        }

        .hidden {
            display: none !important; /* Utility class to hide elements */
        }

        /* Final message display */
        .final-display {
            display: none; /* Hidden by default */
            flex-direction: column;
            align-items: center;
            justify-content: center;
            min-height: 300px;
            padding: 50px;
            text-align: center;
        }

        .final-display h2 {
            font-family: 'Press Start 2P', cursive;
            font-size: 2rem;
            color: var(--warning-color);
            margin-bottom: 20px;
            animation: text-flicker 0.5s infinite alternate; /* Flickering effect */
        }

        .final-display p {
            font-size: 1.4rem;
            color: var(--text-color);
            margin-bottom: 15px;
            opacity: 0;
            animation: fadeInText 1s forwards;
        }

        .final-display .signature {
            font-style: italic;
            margin-top: 30px;
            color: #888;
            font-size: 1rem;
        }

        @keyframes text-flicker {
            0% { opacity: 1; text-shadow: 0 0 5px var(--warning-color); }
            50% { opacity: 0.8; text-shadow: none; }
            100% { opacity: 1; text-shadow: 0 0 5px var(--warning-color), 0 0 10px rgba(255, 153, 0, 0.5); }
        }

        @keyframes fadeInText {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        /* Full-screen error overlay */
        .error-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.9);
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 1000;
            opacity: 0;
            pointer-events: none; /* Allows clicks to pass through when not active */
            transition: opacity 0.5s ease-in-out;
            flex-direction: column;
        }

        .error-overlay.active {
            opacity: 1;
            pointer-events: all; /* Enables clicks when active */
        }

        .overlay-content {
            text-align: center;
            animation: flicker-in 0.8s forwards; /* Animation for content appearing */
        }

        .overlay-content h1 {
            font-family: 'Press Start 2P', cursive;
            font-size: 3rem;
            color: var(--error-color);
            margin-bottom: 20px;
            animation: glitch-text 1s infinite linear alternate; /* Glitch effect on title */
        }

        .overlay-content p {
            font-size: 1.5rem;
            color: var(--text-color);
            margin-bottom: 30px;
            animation: fadeInText 1s forwards 0.5s;
        }

        .overlay-content button {
            background: var(--glitch-red);
            color: white;
            border: 2px solid var(--glitch-red);
            padding: 15px 30px;
            font-family: 'Press Start 2P', cursive;
            font-size: 1.2em;
            cursor: pointer;
            transition: all 0.3s ease;
            box-shadow: 0 0 15px rgba(255, 0, 0, 0.7);
        }

        .overlay-content button:hover {
            background: transparent;
            color: var(--glitch-red);
            box-shadow: 0 0 25px rgba(255, 0, 0, 1);
        }

        @keyframes flicker-in {
            0% { opacity: 0; transform: scale(0.9); text-shadow: 0 0 50px var(--glitch-red); }
            100% { opacity: 1; transform: scale(1); text-shadow: 0 0 10px var(--glitch-red); }
        }

        /* Glitch effect for the overlay itself */
        .error-overlay::before,
        .error-overlay::after {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: black;
            opacity: 0;
            animation: glitch-overlay 0.8s infinite linear alternate; /* Glitch background */
            z-index: -1; /* Behind the content */
            pointer-events: none;
        }

        .error-overlay::after {
            background: white;
            animation-delay: 0.1s; /* Slight delay for second layer of glitch */
        }

        @keyframes glitch-overlay {
            0% { transform: translate(0); opacity: 0; }
            20% { transform: translate(-5px, 5px); opacity: 0.2; }
            40% { transform: translate(-10px, -10px); opacity: 0.1; }
            60% { transform: translate(5px, 5px); opacity: 0.3; }
            80% { transform: translate(10px, -5px); opacity: 0.15; }
            100% { transform: translate(0); opacity: 0; }
        }

        /* Responsive adjustments */
        @media (max-width: 768px) {
            .glitch-title {
                font-size: 2.5rem;
            }

            .glitch-subtitle {
                font-size: 1rem;
            }

            .terminal-window {
                padding: 15px;
            }

            .terminal-content pre {
                font-size: 0.9em;
            }

            .broken-heart {
                font-size: 7rem;
            }

            .heart-message {
                font-size: 1.2rem;
            }

            .final-display h2 {
                font-size: 1.5rem;
            }

            .final-display p {
                font-size: 1.1rem;
            }

            .overlay-content h1 {
                font-size: 2rem;
            }

            .overlay-content p {
                font-size: 1.2rem;
            }

            .overlay-content button {
                font-size: 1em;
                padding: 10px 20px;
            }
        }
    </style>
</head>

<body>
    <div class="error-overlay" id="errorOverlay">
        <div class="overlay-content">
            <h1>SYSTEM FAILURE</h1>
            <p>CRITICAL ERROR: TRUST_PROTOCOL_VIOLATION</p>
            <button id="rebootButton">INITIATE DEBUG MODE</button>
        </div>
    </div>

    <div class="container">
        <header class="header">
            <h1 class="glitch-title">ERROR 404:</h1>
            <h2 class="glitch-subtitle">RELATIONSHIP NOT FOUND</h2>
        </header>

        <section class="terminal-window" id="initialTerminal" style="display: none;">
            <div class="terminal-header">
                <div class="dot red"></div>
                <div class="dot yellow"></div>
                <div class="dot green"></div>
                <span>user@dev-console:~</span>
            </div>
            <div class="terminal-content">
                <pre>
<span class="input">$ git pull origin main</span>
<span class="output line" style="animation-delay: 0.5s;">remote: Counting objects: 100% (12/12)</span>
<span class="output line" style="animation-delay: 1s;">remote: Resolving deltas: 100% (5/5), done.</span>
<span class="output line" style="animation-delay: 1.5s;">From github.com/my-broken-heart/project-love</span>
<span class="output line" style="animation-delay: 2s;"> * branch          main        -> FETCH_HEAD</span>
<span class="error line" style="animation-delay: 3s;">error: Your local changes to the following files would be overwritten by merge:</span>
<span class="error line" style="animation-delay: 3.5s;">    src/core/trust_module.js</span>
<span class="error line" style="animation-delay: 4s;">    src/data/relationship_history.db</span>
<span class="warning line" style="animation-delay: 4.5s;">Please commit your changes or stash them before you merge.</span>
<span class="error line" style="animation-delay: 5s;">Aborting.</span>
<span class="output line" style="animation-delay: 5.5s;">fatal: Not possible to merge. Fix conflicts first.</span>
<span class="input line blink" style="animation-delay: 6s;">$ _</span></pre>
            </div>
            <button class="btn" id="continueTerminalBtn">CONTINUE_DEBUG()</button>
        </section>

        <section class="terminal-window hidden" id="dataRetrievalTerminal">
            <div class="terminal-header">
                <div class="dot red"></div>
                <div class="dot yellow"></div>
                <div class="dot green"></div>
                <span>user@dev-console:/var/log/system</span>
            </div>
            <div class="terminal-content">
                <pre>
<span class="input">$ sudo cat /var/log/emotional_logs.log</span>
<span class="output line" style="animation-delay: 0.5s;">Accessing encrypted emotional logs...</span>
<span class="output line" style="animation-delay: 1.5s;">Decrypting sensitive data...</span>
<span class="warning line" style="animation-delay: 2.5s;">Warning: High integrity risk detected.</span>
<span class="error line" style="animation-delay: 3.5s;">ERROR: Data corruption detected in 'relationship_state.json'.</span>
<span class="output line" style="animation-delay: 4.5s;">Attempting to retrieve last stable state...</span>
<span class="input line blink" style="animation-delay: 5.5s;">$ _</span></pre>
            </div>
            <button class="btn" id="retrieveDataBtn">RETRIEVE_DATA()</button>
        </section>

        <section class="visual-display hidden" id="visualDisplay">
            <div class="broken-heart">üíî<div class="heart-crack"></div></div>
            <p class="heart-message">
                My core system is compromised.<br>
                Heart module corrupted by external access.
            </p>
            <button class="btn" id="initiateDiagnosisBtn">INITIATE_DIAGNOSIS()</button>
        </section>

        <section class="terminal-window hidden" id="analysisStep1">
            <div class="terminal-header">
                <div class="dot red"></div>
                <div class="dot yellow"></div>
                <div class="dot green"></div>
                <span>user@dev-console:/analysis/trust</span>
            </div>
            <div class="terminal-content">
                <pre>
<span class="line" style="animation-delay: 0s;">Scan initiated: `relationship_history.db` for anomalies...</span>
<span class="output line" style="animation-delay: 1.5s;">Analyzing connection patterns...</span>
<span class="error line" style="animation-delay: 3s;">ALERT: Anomalous activity detected on `trust_module.js`.</span>
<span class="warning line" style="animation-delay: 4.5s;">Signature mismatch for 'loyalty_protocol'.</span>
<span class="input line blink" style="animation-delay: 5.5s;">$ _</span></pre>
            </div>
            <button class="btn" id="viewAnomalyLogsBtn">VIEW_ANOMALY_LOGS()</button>
        </section>

        <section class="terminal-window hidden" id="analysisStep2">
            <div class="terminal-header">
                <div class="dot red"></div>
                <div class="dot yellow"></div>
                <div class="dot green"></div>
                <span>user@dev-console:/analysis/rogue_agents</span>
            </div>
            <div class="terminal-content">
                <pre>
<span class="line" style="animation-delay: 0s;">Processing anomaly logs...</span>
<span class="error line" style="animation-delay: 1.5s;">Detected: `UNAUTHORIZED_ACCESS_ATTEMPT` from IP <span class="error">[Ex_BF1_ID]</span>.</span>
<span class="error line" style="animation-delay: 3s;">Concurrent session detected: `[Ex_BF2_ID]` established.</span>
<span class="warning line" style="animation-delay: 4.5s;">Multiple rogue agents identified.</span>
<span class="input line blink" style="animation-delay: 5.5s;">$ _</span></pre>
            </div>
            <button class="btn" id="decodeCommunicationsBtn">DECODE_COMMUNICATIONS()</button>
        </section>

        <section class="terminal-window hidden" id="analysisStep3">
            <div class="terminal-header">
                <div class="dot red"></div>
                <div class="dot yellow"></div>
                <div class="dot green"></div>
                <span>user@dev-console:/analysis/decrypted_payloads</span>
            </div>
            <div class="terminal-content">
                <pre>
<span class="line" style="animation-delay: 0s;">Decoding intercepted communications...</span>
<span class="error line" style="animation-delay: 1.5s;">Payload (Session 1, from [Her_ID] to [Ex_BF1_ID]): "He‚Äôs asleep. We can talk now. üòò" <span class="emoji">ü§¢</span></span>
<span class="error line" style="animation-delay: 3.5s;">Payload (Session 2, from [Her_ID] to [Ex_BF2_ID]): "I never stopped loving you. ‚ù§Ô∏è" <span class="emoji">ü§Æ</span></span>
<span class="warning line" style="animation-delay: 5.5s;">Multiple instances of emotional data transfer to unauthorized entities.</span>
<span class="input line blink" style="animation-delay: 6.5s;">$ _</span></pre>
            </div>
            <button class="btn" id="processBetrayalBtn">PROCESS_BETRAYAL()</button>
        </section>

        <section class="terminal-window hidden" id="analysisStep4">
            <div class="terminal-header">
                <div class="dot red"></div>
                <div class="dot yellow"></div>
                <div class="dot green"></div>
                <span>user@dev-console:/diagnosis/final_report</span>
            </div>
            <div class="terminal-content">
                <pre>
<span class="line" style="animation-delay: 0s;">Diagnosis complete: `TRUST_PROTOCOL_BREACH` confirmed.</span>
<span class="error line" style="animation-delay: 1.5s;">Root cause: `HER_ACTIONS.corrupt` - direct manipulation of core values.</span>
<span class="warning line" style="animation-delay: 3s;">Impact: Irreversible damage to MY `heart_module.dll`.</span>
<span class="output line" style="animation-delay: 4.5s;">Recommendation: System wipe and re-initialization in `SINGLE_USER_MODE`.</span>
<span class="input line blink" style="animation-delay: 5.5s;">$ _</span></pre>
            </div>
            <button class="btn" id="confrontRealityBtn">CONFRONT_REALITY()</button>
        </section>

        <section class="final-display hidden" id="finalMessage">
            <h2>> DELETING ALL EMOTIONAL DATA...</h2>
            <p class="line" style="animation-delay: 0s;">
                <span class="emoji">üíÄ</span> `relationship_status` set to `TERMINATED`.
            </p>
            <p class="line" style="animation-delay: 2s;">
                `future_plans` directory: <span class="error">DELETED.</span>
            </p>
            <p class="line" style="animation-delay: 4s;">
                `memories` cache: <span class="warning">PURGING... (Warning: Some fragments may persist)</span>
            </p>
            <p class="line" style="animation-delay: 6s;">
                `heart.exe` process: <span class="success">STOPPED.</span>
            </p>
            <p class="line" style="animation-delay: 8s;">
                System will now restart in <span class="warning">SINGLE_USER_MODE</span>.
            </p>
            <p class="signature line" style="animation-delay: 10s;">
                She corrupted the heart of a programmer (me).<br>
                Goodbye, my beautiful lie.
            </p>
        </section>

    </div>

    <script>
        document.addEventListener('DOMContentLoaded', () => {
            // Get references to key DOM elements
            const errorOverlay = document.getElementById('errorOverlay');
            const rebootButton = document.getElementById('rebootButton');
            const initialTerminal = document.getElementById('initialTerminal');
            const continueTerminalBtn = document.getElementById('continueTerminalBtn');
            const dataRetrievalTerminal = document.getElementById('dataRetrievalTerminal');
            const retrieveDataBtn = document.getElementById('retrieveDataBtn');
            const visualDisplay = document.getElementById('visualDisplay');
            const initiateDiagnosisBtn = document.getElementById('initiateDiagnosisBtn');
            const analysisStep1 = document.getElementById('analysisStep1');
            const viewAnomalyLogsBtn = document.getElementById('viewAnomalyLogsBtn');
            const analysisStep2 = document.getElementById('analysisStep2');
            const decodeCommunicationsBtn = document.getElementById('decodeCommunicationsBtn');
            const analysisStep3 = document.getElementById('analysisStep3');
            const processBetrayalBtn = document.getElementById('processBetrayalBtn');
            const analysisStep4 = document.getElementById('analysisStep4');
            const confrontRealityBtn = document.getElementById('confrontRealityBtn');
            const finalMessage = document.getElementById('finalMessage');

            // Show the initial error overlay after a short delay to simulate a system boot
            setTimeout(() => {
                errorOverlay.classList.add('active');
            }, 1000); // Overlay appears after 1 second

            // Event listener for the "INITIATE DEBUG MODE" button on the overlay
            rebootButton.addEventListener('click', () => {
                errorOverlay.classList.remove('active'); // Hide the overlay
                // Allow some time for the overlay transition to complete before showing the terminal
                setTimeout(() => {
                    initialTerminal.style.display = 'block'; // Show the initial terminal
                    // Add a small delay before animating terminal lines to ensure element is rendered
                    setTimeout(() => {
                        animateTerminalLines(initialTerminal.querySelector('.terminal-content'), continueTerminalBtn);
                    }, 50); // Small delay (e.g., 50ms)
                }, 500); // Start terminal section after 0.5 seconds
            });

            /**
             * Animates the lines within a terminal content area, making them fade in sequentially.
             * After all lines, it reveals a specified button.
             * @param {HTMLElement} terminalContentElement The DOM element containing the terminal lines.
             * @param {HTMLElement} nextButtonElement The button to reveal after lines animate.
             */
            function animateTerminalLines(terminalContentElement, nextButtonElement) {
                // Check if terminalContentElement is null before proceeding
                if (!terminalContentElement) {
                    console.error("Error: terminalContentElement is null. Cannot animate lines.");
                    return;
                }

                const lines = terminalContentElement.querySelectorAll('.line');
                let maxDelay = 0;
                lines.forEach((line) => {
                    const delay = parseFloat(line.style.animationDelay) * 1000;
                    if (delay > maxDelay) {
                        maxDelay = delay;
                    }
                    // Reset opacity and transform before animating to ensure re-animation if element was hidden
                    line.style.opacity = '0';
                    line.style.transform = 'translateY(10px)';
                    setTimeout(() => {
                        line.style.opacity = '1';
                        line.style.transform = 'translateY(0)'; // Move line into position
                    }, delay);
                });

                // After all lines have animated, show the next button
                setTimeout(() => {
                    if (nextButtonElement) {
                        nextButtonElement.style.display = 'block';
                        nextButtonElement.style.animation = 'fadeInText 1s forwards'; // Animate the button in
                    }
                }, maxDelay + 500); // Add a small buffer after the last line animates
            }

            // Event listener for the "CONTINUE_DEBUG()" button after initial terminal
            continueTerminalBtn.addEventListener('click', () => {
                initialTerminal.classList.add('hidden'); // Hide the initial terminal
                dataRetrievalTerminal.classList.remove('hidden'); // Show the new data retrieval terminal
                dataRetrievalTerminal.scrollIntoView({ behavior: 'smooth', block: 'start' }); // Scroll to view
                setTimeout(() => {
                    animateTerminalLines(dataRetrievalTerminal.querySelector('.terminal-content'), retrieveDataBtn);
                }, 50);
            });

            // Event listener for the "RETRIEVE_DATA()" button
            retrieveDataBtn.addEventListener('click', () => {
                dataRetrievalTerminal.classList.add('hidden');
                visualDisplay.classList.remove('hidden');
                visualDisplay.scrollIntoView({ behavior: 'smooth', block: 'start' });
                // The heart and message have their own CSS animations, so no explicit JS animation is needed here
                // We just need to ensure the button appears after a delay
                setTimeout(() => {
                    initiateDiagnosisBtn.style.display = 'block';
                    initiateDiagnosisBtn.style.animation = 'fadeInText 1s forwards';
                }, 3000); // Show button after 3 seconds to allow heart animation to start
            });

            // Event listener for "INITIATE_DIAGNOSIS()" button
            initiateDiagnosisBtn.addEventListener('click', () => {
                visualDisplay.classList.add('hidden');
                analysisStep1.classList.remove('hidden');
                analysisStep1.scrollIntoView({ behavior: 'smooth', block: 'start' });
                setTimeout(() => {
                    animateTerminalLines(analysisStep1.querySelector('.terminal-content'), viewAnomalyLogsBtn);
                }, 50);
            });

            // Event listener for "VIEW_ANOMALY_LOGS()" button
            viewAnomalyLogsBtn.addEventListener('click', () => {
                analysisStep1.classList.add('hidden');
                analysisStep2.classList.remove('hidden');
                analysisStep2.scrollIntoView({ behavior: 'smooth', block: 'start' });
                setTimeout(() => {
                    animateTerminalLines(analysisStep2.querySelector('.terminal-content'), decodeCommunicationsBtn);
                }, 50);
            });

            // Event listener for "DECODE_COMMUNICATIONS()" button
            decodeCommunicationsBtn.addEventListener('click', () => {
                analysisStep2.classList.add('hidden');
                analysisStep3.classList.remove('hidden');
                analysisStep3.scrollIntoView({ behavior: 'smooth', block: 'start' });
                setTimeout(() => {
                    animateTerminalLines(analysisStep3.querySelector('.terminal-content'), processBetrayalBtn);
                }, 50);
            });

            // Event listener for "PROCESS_BETRAYAL()" button
            processBetrayalBtn.addEventListener('click', () => {
                analysisStep3.classList.add('hidden');
                analysisStep4.classList.remove('hidden');
                analysisStep4.scrollIntoView({ behavior: 'smooth', block: 'start' });
                setTimeout(() => {
                    animateTerminalLines(analysisStep4.querySelector('.terminal-content'), confrontRealityBtn);
                }, 50);
            });

            // Event listener for "CONFRONT_REALITY()" button (leads to final message)
            confrontRealityBtn.addEventListener('click', () => {
                analysisStep4.classList.add('hidden');
                finalMessage.classList.remove('hidden');
                finalMessage.scrollIntoView({ behavior: 'smooth', block: 'start' });
                // Lines in final message animate sequentially by their own animation-delay
                // No need for explicit JS animation for them.
            });
        });
    </script>
</body>

</html>